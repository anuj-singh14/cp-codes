#include <bits/stdc++.h>
using namespace std ;
 
#define pque priority_queue
#define umap unordered_map
#define uset unordered_set 
#define sz size()
#define bsrch binary_search
#define mst(a,x) memset((a),(x),sizeof(a))
#define pub push_back
#define lob lower_bound
#define upb upper_bound
#define in insert
#define sb __builtin_popcountll
#define adv advance
#define mp make_pair
#define tez ios_base::sync_with_stdio(false) ; cin.tie(NULL) ; cout.tie(NULL) ;
#define prf fixed<<setprecision(10)
#define be begin()
#define en end()
#define fi first
#define se second
#define t() ll t; cin>>t; while(t--)
#define frw(i,a,b) for(ll (i)=(a) ; (i)<(b) ; (i)++)
#define tr(c,i) for(__typeof((c).begin()) i=(c).begin(); i!=(c).end(); i++) 
#define bck(i,a,b) for(ll (i)=(a) ; (i)>(b) ; (i)--)
#define all(a) (a).be,(a).en
#define rall(a) (a).rbegin(),(a).rend()
#define inp(a,n) frw(i,0,n){ll j; cin>>j; (a).pub(j);}
#define ite iterator
#define nl cout<<'\n' ;
#define bl cout<<' ' ;
#define INF LONG_LONG_MAX
#define mod 1000000007
 
typedef long double ld ;
typedef long long ll ;
typedef unsigned long long ull ;
typedef vector<ll> vll ;
typedef pair<ll,ll> pll ;
typedef vector<pair<ll,ll>> vpll ;
typedef map<ll,ll> mll ;
typedef umap<ll,ll> umll ;
typedef set<ll> sll ;
typedef uset<ll> usll ;
typedef multiset<ll> msll ;

vll a ;

ll baap(vll &v,ll x){
    while(v[x]!=x){
        v[x]=v[v[x]] ;
        x=v[x] ;
    }
    return x ;
}
 
void ans(pair<ll,pll> p[],vll &v,ll m){
    frw(i,0,m){
        ll x=p[i].se.fi ;
        ll y=p[i].se.se ;
        ll w=p[i].fi ;
        if(baap(v,x)!=baap(v,y)){
            a.pub(w) ;
            v[baap(v,x)]=v[baap(v,y)] ;
        }
    }
}
 
int main(){
    tez
    ll n,m,k ;
    cin>>n>>m>>k ;
    vll c(n+1) ;
    pair<ll,pll> p[m] ;
    frw(i,0,n+1)    c[i]=i ;
    frw(i,0,m){
        ll x,y,w ;
        cin>>x>>y>>w ;
        p[i]=mp(w,mp(x,y)) ;
    }
    sort(p,p+m) ;
    ans(p,c,m) ;
}
 
 
